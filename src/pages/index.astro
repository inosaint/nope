---
import BaseLayout from '../layouts/BaseLayout.astro';
import PortfolioItem from '../components/PortfolioItem.astro';
import Modal from '../components/Modal.astro';
import '../styles/global.css';
---

<BaseLayout title="Your Name">
  <!-- SVG Brushstroke Animations -->
  <svg class="brushstrokes" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">
    <defs>
      <linearGradient id="stroke1" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:currentColor;stop-opacity:0.15" />
        <stop offset="100%" style="stop-color:currentColor;stop-opacity:0.05" />
      </linearGradient>
      <linearGradient id="stroke2" x1="100%" y1="0%" x2="0%" y2="100%">
        <stop offset="0%" style="stop-color:currentColor;stop-opacity:0.12" />
        <stop offset="100%" style="stop-color:currentColor;stop-opacity:0.04" />
      </linearGradient>
    </defs>

    <!-- Curved brushstrokes -->
    <path class="brushstroke brush1" d="M 10,20 Q 30,10 50,25 T 90,30" stroke="url(#stroke1)" stroke-width="0.8" fill="none" stroke-linecap="round"/>
    <path class="brushstroke brush2" d="M 15,50 Q 40,45 60,55 T 95,50" stroke="url(#stroke2)" stroke-width="0.6" fill="none" stroke-linecap="round"/>
    <path class="brushstroke brush3" d="M 5,70 Q 25,75 45,65 T 85,75" stroke="url(#stroke1)" stroke-width="0.7" fill="none" stroke-linecap="round"/>
    <path class="brushstroke brush4" d="M 20,85 Q 50,80 70,90 T 95,85" stroke="url(#stroke2)" stroke-width="0.5" fill="none" stroke-linecap="round"/>
    <path class="brushstroke brush5" d="M 90,15 Q 70,25 50,15 T 10,25" stroke="url(#stroke1)" stroke-width="0.6" fill="none" stroke-linecap="round"/>
  </svg>

  <main>
    <div class="container">
      <div class="content-grid">
        <!-- Main Content -->
        <div class="main-content">
          <!-- Hero -->
          <section class="hero">
            <h1>Your Name</h1>
            <div class="bio">
              <p>
               I enjoy working with people and building products. I am interested in understanding complex business problems and finding solutions. 
              </p>
              <p>
                In my work, I focus on bringing creativity and thoughtfulness to every project.
                I believe in the power of good design to make a real difference in people's lives.
              </p>
            </div>
          </section>

          <!-- Portfolio -->
          <section class="portfolio">
            <PortfolioItem
              date="December 2024"
              title="Latest Project"
              description="In this recent project, I work with a non profit helping them move their earlier in-situ pedagogy to the virtual classroom. The non profit teaches students from humble backgrounds via an intensive one-year course to learn Python, Javascript, Node.js, English and communication skills so they can be prepared for the industry."
              link="https://example.com"
              images={[{ src: 'https://placehold.co/800x600/e5e7eb/666666?text=Project+Image', alt: 'Latest Project' }]}
            />

            <PortfolioItem
              date="November 2024"
              title="Design Workshop"
              description="Facilitated a workshop on creative problem-solving and design thinking. Helped teams unlock new ways of approaching complex challenges."
              images={[
                { src: 'https://placehold.co/800x600/e5e7eb/666666?text=Workshop+1', alt: 'Design Workshop' },
                { src: 'https://placehold.co/800x600/e5e7eb/666666?text=Workshop+2', alt: 'Design Workshop' }
              ]}
              layout="double"
            />

            <PortfolioItem
              date="October 2024"
              title="Product Launch"
              description="Led the design for a new product launch. Focused on creating an intuitive experience that delights users from their first interaction."
              link="https://example.com"
              images={[{ src: 'https://placehold.co/800x600/e5e7eb/666666?text=Product+Launch', alt: 'Product Launch' }]}
            />

            <PortfolioItem
              date="September 2024"
              title="Speaking Engagement"
              description="Gave a talk about the intersection of creativity and technology. Shared insights on building products with joy and intention."
              link="https://example.com"
              images={[
                { src: 'https://placehold.co/800x600/e5e7eb/666666?text=Speaking+1', alt: 'Speaking Engagement' },
                { src: 'https://placehold.co/800x600/e5e7eb/666666?text=Speaking+2', alt: 'Speaking Engagement' }
              ]}
              layout="double"
            />

            <PortfolioItem
              date="August 2024"
              title="Community Initiative"
              description="Started a community initiative to bring together designers and creators. Building spaces for collaboration and shared learning."
              images={[{ src: 'https://placehold.co/800x600/e5e7eb/666666?text=Community', alt: 'Community Initiative' }]}
            />

            <PortfolioItem
              date="July 2024"
              title="Design System"
              description="Built a comprehensive design system to improve consistency and efficiency. Created reusable components that scale across platforms."
              link="https://example.com"
              images={[{ src: 'https://placehold.co/800x600/e5e7eb/666666?text=Design+System', alt: 'Design System' }]}
            />
          </section>
        </div>

        <!-- Sidebar (empty for now) -->
        <aside class="sidebar">
        </aside>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <nav class="social-links">
          <a href="https://instagram.com/9porcupine" target="_blank" rel="noopener noreferrer">Instagram</a>
          <span>/</span>
          <a href="https://twitter.com/9porcupine" target="_blank" rel="noopener noreferrer">Twitter</a>
          <span>/</span>
          <a href="https://in.linkedin.com/in/noopurvarma" target="_blank" rel="noopener noreferrer">LinkedIn</a>
          <span>/</span>
          <a href="/resume.pdf" target="_blank" rel="noopener noreferrer">Resume</a>
        </nav>

        <div class="footer-right">
          <button id="colophon-btn" type="button" class="footer-link">Colophon</button>
          <button id="theme-toggle" type="button" aria-label="Select theme">
            <svg width="20" height="20" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v11a2 2 0 104 0V4a2 2 0 00-2-2zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z" clip-rule="evenodd"></path>
            </svg>
          </button>
        </div>
      </div>
    </footer>

    <!-- Theme Modal -->
    <Modal id="theme-modal" title="Select Theme">
      <div class="theme-grid">
        <button data-theme="wheat-fields" class="theme-card active">
          <div class="theme-preview">
            <img src="/assets/wheat-fields.jpg" alt="Wheat Fields" />
          </div>
          <span class="theme-name">Wheat Fields</span>
        </button>
        <button data-theme="starry-night" class="theme-card">
          <div class="theme-preview">
            <img src="/assets/starry-night.jpg" alt="Starry Night" />
          </div>
          <span class="theme-name">Starry Night</span>
        </button>
        <button data-theme="sunflowers" class="theme-card">
          <div class="theme-preview">
            <img src="/assets/sunflowers.jpg" alt="Sunflowers" />
          </div>
          <span class="theme-name">Sunflowers</span>
        </button>
      </div>
    </Modal>

    <!-- Colophon Modal -->
    <Modal id="colophon-modal" title="Colophon">
      <div class="colophon-content">
        <p>This portfolio site is built with modern web technologies, focusing on performance, accessibility, and clean design.</p>

        <h4>Technology Stack</h4>
        <ul class="tech-list">
          <li><strong>Astro</strong> â€” Static site generator for lightning-fast performance</li>
          <li><strong>TypeScript</strong> â€” Type-safe development</li>
          <li><strong>Custom CSS</strong> â€” ~400 lines of clean, maintainable styles</li>
          <li><strong>Google Fonts</strong> â€” Anek Latin typography</li>
        </ul>

        <h4>Design Inspiration</h4>
        <p>The Van Gogh-inspired themes pay homage to three masterpieces:</p>
        <ul class="tech-list">
          <li><strong>Starry Night</strong> (1889) â€” Swirling blues and golden stars</li>
          <li><strong>Sunflowers</strong> (1888) â€” Vibrant yellows and warm tones</li>
          <li><strong>Wheat Fields</strong> (1890) â€” Ochre, green, and sky blue</li>
        </ul>

        <h4>Features</h4>
        <ul class="tech-list">
          <li>âœ¨ No framework bloat â€” Pure semantic HTML</li>
          <li>ðŸŽ¨ Animated watercolor backgrounds</li>
          <li>ðŸ“± Fully responsive (360px to desktop)</li>
          <li>â™¿ WCAG-compliant color contrasts</li>
          <li>âš¡ Optimized for performance</li>
        </ul>
      </div>
    </Modal>
  </main>
</BaseLayout>

<script>
  // Modal utilities
  function openModal(modalId: string) {
    const modal = document.getElementById(modalId);
    modal?.classList.remove('hidden');
    document.body.style.overflow = 'hidden';
  }

  function closeModal(modalId: string) {
    const modal = document.getElementById(modalId);
    modal?.classList.add('hidden');
    document.body.style.overflow = '';
  }

  // Theme management
  const savedTheme = localStorage.getItem('site-theme') || 'wheat-fields';
  document.documentElement.setAttribute('data-theme', savedTheme);

  // Update active theme card
  function updateActiveTheme(theme: string) {
    document.querySelectorAll('.theme-card').forEach(card => {
      card.classList.toggle('active', card.getAttribute('data-theme') === theme);
    });
  }
  updateActiveTheme(savedTheme);

  // Theme toggle button
  document.getElementById('theme-toggle')?.addEventListener('click', () => {
    openModal('theme-modal');
  });

  // Colophon button
  document.getElementById('colophon-btn')?.addEventListener('click', () => {
    openModal('colophon-modal');
  });

  // Close modal buttons
  document.querySelectorAll('.modal-close').forEach(btn => {
    btn.addEventListener('click', function() {
      const modal = this.closest('.modal');
      if (modal) {
        closeModal(modal.id);
      }
    });
  });

  // Close modal on overlay click
  document.querySelectorAll('.modal-overlay').forEach(overlay => {
    overlay.addEventListener('click', function() {
      const modal = this.closest('.modal');
      if (modal) {
        closeModal(modal.id);
      }
    });
  });

  // Theme selection
  document.querySelectorAll('.theme-card').forEach(card => {
    card.addEventListener('click', function() {
      const theme = this.getAttribute('data-theme');
      if (theme) {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('site-theme', theme);
        updateActiveTheme(theme);
        closeModal('theme-modal');
      }
    });
  });

  // ESC key to close modals
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
      document.querySelectorAll('.modal:not(.hidden)').forEach(modal => {
        closeModal(modal.id);
      });
    }
  });
</script>
